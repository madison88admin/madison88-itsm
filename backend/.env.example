# Database (prefer pool/pgBouncer URL for serverless)
DATABASE_URL=
DATABASE_HOST=
DATABASE_PORT=5432
DATABASE_NAME=postgres
DATABASE_USER=
DATABASE_PASSWORD=

# Optional: override pool settings
DB_MAX_CONN=4
DB_MIN_CONN=0
DB_IDLE_TIMEOUT_MS=30000
DB_CONN_TIMEOUT_MS=30000
DB_STATEMENT_TIMEOUT_MS=60000
DB_RETRY_COUNT=5
DB_RETRY_DELAY_MS=3000

# Frontend URLs for CORS
FRONTEND_URL=http://localhost:3000
FRONTEND_PROD_URL=https://m88itsm.netlify.app
ADDITIONAL_CORS_ORIGINS=

# Quick debug (do NOT enable in production)
CORS_ALLOW_ALL=false# ============================================
# MADISON88 ITSM BACKEND - ENVIRONMENT CONFIG
# ============================================
# See PRODUCTION_ENV_SETUP.md for deployment guide

# === DATABASE CONFIGURATION ===
# For Development: Use local PostgreSQL or Supabase dev environment
# For Production: Use Supabase connection pooler URL
DATABASE_URL=postgresql://user:password@localhost:5432/madison88_itsm
# Production example: postgresql://user:pass@pooler.supabase.co:6543/postgres

# === REDIS CONFIGURATION (Optional) ===
# Set REDIS_ENABLED=false to run without Redis (local dev only)
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# === SECURITY - JWT CONFIGURATION ===
# IMPORTANT: Generate a strong random string for production!
# Example: openssl rand -base64 32
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRY=7d

# === SERVER CONFIGURATION ===
NODE_ENV=development
# Render assigns PORT automatically; do not hardcode in production
PORT=3001
API_URL=http://localhost:3001
APP_NAME=Madison88 ITSM

# === FRONTEND URLS (CORS) ===
FRONTEND_URL=http://localhost:3000
FRONTEND_PROD_URL=https://your-site.netlify.app

# === EMAIL CONFIGURATION (BREVO SMTP) ===
ENABLE_EMAIL_NOTIFICATIONS=true
SMTP_HOST=smtp-relay.brevo.com
SMTP_PORT=587
SMTP_USER=your-brevo-smtp-login
SMTP_PASSWORD=your-brevo-smtp-password
SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_FROM_NAME=Madison88 ITSM Support
ADMIN_NOTIFICATION_EMAIL=admin@yourdomain.com

# EmailJS Configuration (set these to use EmailJS instead of SMTP)
EMAILJS_SERVICE_ID=service_xxxxxxxx
EMAILJS_TEMPLATE_ID=template_xxxxxxxx
EMAILJS_PUBLIC_KEY=public_xxxxxxxx
EMAILJS_PRIVATE_KEY=private_xxxxxxxx

# Optional: override all notification recipients (testing)
NOTIFICATION_EMAIL_OVERRIDE=johncarlomanalo165@gmail.com

# AWS S3 Configuration (for file uploads)
AWS_REGION=ap-southeast-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_BUCKET=madison88-itsm-uploads
AWS_S3_URL=https://s3.amazonaws.com/madison88-itsm-uploads

# File Upload Configuration
MAX_FILE_SIZE=10485760
MAX_TOTAL_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=pdf,png,jpg,xlsx,docx,msg

# Security
SESSION_TIMEOUT=1800000
BCRYPT_ROUNDS=10

# Logging
LOG_LEVEL=info
LOG_FILE=logs/app.log

# Feature Flags
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SOCKET_IO=true
ENABLE_AUTO_CLASSIFICATION=true
ENABLE_SLA_TRACKING=true

# Ticket creation
ATTACHMENT_REQUIRED=false
DUPLICATE_CHECK_HOURS=24

# SLA fallback when no rule exists for a priority (hours)
DEFAULT_SLA_RESPONSE_HOURS=4
DEFAULT_SLA_RESOLUTION_HOURS=24

# SLA Configuration
SLA_CHECK_INTERVAL=300000

# Timezone
DEFAULT_TIMEZONE=UTC
TIMEZONE_PHILIPPINES=Asia/Manila
TIMEZONE_US=America/New_York
TIMEZONE_INDONESIA=Asia/Jakarta

# Multi-currency Support
DEFAULT_CURRENCY=USD
SUPPORTED_CURRENCIES=USD,PHP,IDR

# Third-party Integrations
ENABLE_MICROSOFT_365_INTEGRATION=false
ENABLE_CHATBOT_INTEGRATION=false
ENABLE_TWOFACTOR_AUTH=false
ENABLE_SMS_NOTIFICATIONS=false
